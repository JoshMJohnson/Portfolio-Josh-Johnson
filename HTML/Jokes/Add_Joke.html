<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="author" content="Josh Johnson">
        <meta name="description" content="Receives a joke from user and adds to the database">
        <meta name="keywords" content="HTML, CSS">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../../CSS/Jokes/Add_Joke.css">
        <title>Jokes</title>
    </head>
    <body>
        <div id="heading">
            <h1>Funny Jokes R Us</h1>
        </div>
        <div id="add_joke">
            <h2>Lets hear what you got!</h2>
            <form method="post">
                <label for="first_name">Contributers First Name:</label>
                <input type="text" id="first_name" name="first_name" required><br>
                <label for="last_name">Contributers Last Name:</label>
                <input type="text" id="last_name" name="last_name" required><br>
                <div id="original">
                    <label for="original">Did you think of this joke yourself?</label>
                    <input type="radio" id="yes" name="original" value="Yes" required>
                    <label for="yes">Yes</label>
                    <input type="radio" id="no" name="original" value="No">
                    <label for="no">No</label><br>
                </div>
                <div id="age_restricted">
                    <label for="appropriate">This joke is acceptable for the following ages:</label><br>
                    <input type="checkbox" id="friendly_child" name="friendly_child" value="Child">
                    <label for="friendly_child">10 and younger</label><br>
                    <input type="checkbox" id="friendly_young" name="friendly_young" value="Young">
                    <label for="friendly_young">11-17</label><br>
                    <input type="checkbox" id="friendly_adult" name="friendly_adult" value="Adult">
                    <label for="friendly_adult">18+</label><br>
                </div>
                <label for="joke">Joke:</label><br>
                <textarea id="joke" name="joke" rows="6" cols="50" placeholder="Lets hear a funny!" required></textarea><br>
                <input type="reset" value="Clear">
                <input type="submit" value="Share Joke">
            </form>
        </div>
        <div id="hear_joke">
            <p>Now that you've shared your funny joke do you want to hear one?</p>
            <a href="Hear_Joke.html"><button type="button">Hear Joke!</button></a>
        </div>

        <script>
            /* ensure at least one checkbox is checked for appropriate age groups */
            (function() {
                const div = document.querySelector('#age_restricted');
                const checkboxes = div.querySelectorAll('input[type=checkbox]');
                const firstCheckbox = checkboxes.length > 0 ? checkboxes[0] : null;

                function init() {
                    if (firstCheckbox) {
                        for (let i = 0; i < checkboxes.length; i++) {
                            checkboxes[i].addEventListener('change', checkValidity);
                        }

                        checkValidity();
                    }
                }

                function isChecked() {
                    for (let i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i].checked) return true;
                    }

                    return false;
                }

                function checkValidity() {
                    const errorMessage = !isChecked() ? 'At least one checkbox must be selected.' : '';
                    firstCheckbox.setCustomValidity(errorMessage);
                }

                init();
            })();
        </script>
    </body>
</html>